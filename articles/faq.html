<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dsl">
<title>Frequently Asked Questions â€¢ dsl</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Frequently Asked Questions">
<meta property="og:description" content="dsl">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dsl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/intro.html">Get Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/model.html">Models available in DSL</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/faq.html">Frequently Asked Questions</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/aggregate.html">Units of Analysis and Labeling Differ</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Frequently Asked Questions</h1>
            
      
      
      <div class="d-none name"><code>faq.Rmd</code></div>
    </div>

    
    
<p><br></p>
<p class="h5">
<strong>On this page, we answer frequently asked questions.</strong>
</p>
<br><div class="card bg-light mb-3">
<div class="card-header">
<strong>Table of Contents</strong>
</div>
<div class="card-body">
<ul>
<li><p><a href="#power">How Many Documents Should Experts Annotate?</a>
<br></p></li>
<li><p><a href="#variable">What Types of Predicted Variables Can DSL
Handle?</a> <br></p></li>
<li><p><a href="#sample">(More Complex) Sampling Strategies?</a>
<br></p></li>
<li><p><a href="#cluster">How Can We Implement Cluster Standard Errors
in DSL?</a> <br></p></li>
<li><p><a href="#unit">What if the Unit of Analysis is not the same as
the Unit of Labeling?</a> <br></p></li>
<li><p><a href="#category">How to use DSL for Estimating the Category
Proportions over Time or across Groups?</a> <br></p></li>
<li><p><a href="#sl">How Can We Internally Implement Supervised Machine
Learning for Predictions?</a> <br></p></li>
</ul>
</div>
</div>
<p><br></p>
<div class="section level4">
<h4 id="power">
<strong>How Many Documents Should Experts Annotate?</strong><a class="anchor" aria-label="anchor" href="#power"></a>
</h4>
<p class="lh-lg">
</p>
<p>In practice, researchers might wonder how many documents they have to
expert annotate. To help researchers in such common scenarios, we
develop a data-driven power analysis: after annotating a small number of
documents, we can predict how many more documents researchers need to
annotate in order to achieve a user-specified size of standard
error.</p>
<p>As an example, we use the data we introduced in the Get Started
page.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://naokiegami.com/dsl/">dsl</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"PanChen"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">PanChen</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   countyWrong pred_countyWrong SendOrNot prefecWrong connect2b prevalence</span></span>
<span><span class="co">## 1           0                0         0           0         1          0</span></span>
<span><span class="co">## 2           0                1         0           0         0          0</span></span>
<span><span class="co">## 3           1                0         0           0         0          0</span></span>
<span><span class="co">## 4          NA                0         0           0         1          0</span></span>
<span><span class="co">## 5          NA                0         0           1         0          0</span></span>
<span><span class="co">## 6          NA                0         0           0         1          0</span></span>
<span><span class="co">##   regionj groupIssue</span></span>
<span><span class="co">## 1       0          1</span></span>
<span><span class="co">## 2       0          1</span></span>
<span><span class="co">## 3       0          1</span></span>
<span><span class="co">## 4       0          1</span></span>
<span><span class="co">## 5       0          1</span></span>
<span><span class="co">## 6       0          1</span></span></code></pre>
<p>In particular, users can apply function <code><a href="../reference/power_dsl.html">power_dsl()</a></code> to
predict standard errors with different size of expert-coded data.
Researchers can use the same arguments from <code>dsl</code> and add one
argument <code>labeled_size</code>, which represents the number of
expert-coded documents for which we predict standard errors. Recall that
the current number of expert-coded documents is 500.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power_dsl.html">power_dsl</a></span><span class="op">(</span>labeled_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">700</span>, <span class="fl">800</span>, <span class="fl">900</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>                       model <span class="op">=</span> <span class="st">"logit"</span>, </span>
<span>                       formula <span class="op">=</span> <span class="va">SendOrNot</span> <span class="op">~</span> <span class="va">countyWrong</span> <span class="op">+</span> <span class="va">prefecWrong</span> <span class="op">+</span> </span>
<span>                         <span class="va">connect2b</span> <span class="op">+</span> <span class="va">prevalence</span> <span class="op">+</span> <span class="va">regionj</span> <span class="op">+</span> <span class="va">groupIssue</span>,</span>
<span>                       predicted_var <span class="op">=</span> <span class="st">"countyWrong"</span>,</span>
<span>                       prediction <span class="op">=</span> <span class="st">"pred_countyWrong"</span>,</span>
<span>                       data <span class="op">=</span> <span class="va">PanChen</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span>
<span><span class="co">## Power Analysis: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">power_out</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ==========================</span></span>
<span><span class="co">## Predicted Standard Errors:</span></span>
<span><span class="co">## ==========================</span></span>
<span><span class="co">##      (Intercept) countyWrong prefecWrong connect2b prevalence   regionj</span></span>
<span><span class="co">## 500    0.3621287   0.2229501   0.2969601 0.1196955  0.1519671 0.4565481</span></span>
<span><span class="co">## 600    0.3616287   0.2045568   0.2962946 0.1189752  0.1514800 0.4563130</span></span>
<span><span class="co">## 700    0.3612711   0.1903336   0.2958184 0.1184581  0.1511311 0.4561449</span></span>
<span><span class="co">## 800    0.3610027   0.1789257   0.2954606 0.1180687  0.1508689 0.4560189</span></span>
<span><span class="co">## 900    0.3607938   0.1695230   0.2951821 0.1177650  0.1506646 0.4559208</span></span>
<span><span class="co">## 1000   0.3606266   0.1616074   0.2949591 0.1175214  0.1505010 0.4558423</span></span>
<span><span class="co">##      groupIssue</span></span>
<span><span class="co">## 500   0.3597029</span></span>
<span><span class="co">## 600   0.3596288</span></span>
<span><span class="co">## 700   0.3595758</span></span>
<span><span class="co">## 800   0.3595361</span></span>
<span><span class="co">## 900   0.3595052</span></span>
<span><span class="co">## 1000  0.3594804</span></span>
<span><span class="co">## ---</span></span></code></pre>
<p>The first row shows the current standard errors for coefficients. The
remaining rows show predicted standard errors.</p>
<p>Importantly, as we increase the number of expert annotations for
<code>countyWrong</code>, standard errors for <code>countyWrong</code>
are predicted to decrease sharply. For the other variables, we do not
see similarly sharp reduction because the other variables are already
observed for the entire data. Small reduction in their standard errors
come from correlations with <code>countyWrong</code>.</p>
<p>Researchers can use function <code>plot</code> to visualize the power
analysis.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">power_out</span>, coef_name <span class="op">=</span> <span class="st">"countyWrong"</span><span class="op">)</span></span></code></pre></div>
<p><img src="faq_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Finally, researchers can also apply <code><a href="../reference/power_dsl.html">power_dsl()</a></code> directly
to the output from function <code><a href="../reference/dsl.html">dsl()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"logit"</span>, </span>
<span>           formula <span class="op">=</span> <span class="va">SendOrNot</span> <span class="op">~</span> <span class="va">countyWrong</span> <span class="op">+</span> <span class="va">prefecWrong</span> <span class="op">+</span> </span>
<span>             <span class="va">connect2b</span> <span class="op">+</span> <span class="va">prevalence</span> <span class="op">+</span> <span class="va">regionj</span> <span class="op">+</span> <span class="va">groupIssue</span>,</span>
<span>           predicted_var <span class="op">=</span> <span class="st">"countyWrong"</span>,</span>
<span>           prediction <span class="op">=</span> <span class="st">"pred_countyWrong"</span>,</span>
<span>           data <span class="op">=</span> <span class="va">PanChen</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power_out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/power_dsl.html">power_dsl</a></span><span class="op">(</span>dsl_out <span class="op">=</span> <span class="va">out</span>, </span>
<span>                        labeled_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">600</span>, <span class="fl">700</span>, <span class="fl">800</span>, <span class="fl">900</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Power Analysis: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">power_out2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## ==========================</span></span>
<span><span class="co">## Predicted Standard Errors:</span></span>
<span><span class="co">## ==========================</span></span>
<span><span class="co">##      (Intercept) countyWrong prefecWrong connect2b prevalence   regionj</span></span>
<span><span class="co">## 500    0.3621287   0.2229501   0.2969601 0.1196955  0.1519671 0.4565481</span></span>
<span><span class="co">## 600    0.3616287   0.2045568   0.2962946 0.1189752  0.1514800 0.4563130</span></span>
<span><span class="co">## 700    0.3612711   0.1903336   0.2958184 0.1184581  0.1511311 0.4561449</span></span>
<span><span class="co">## 800    0.3610027   0.1789257   0.2954606 0.1180687  0.1508689 0.4560189</span></span>
<span><span class="co">## 900    0.3607938   0.1695230   0.2951821 0.1177650  0.1506646 0.4559208</span></span>
<span><span class="co">## 1000   0.3606266   0.1616074   0.2949591 0.1175214  0.1505010 0.4558423</span></span>
<span><span class="co">##      groupIssue</span></span>
<span><span class="co">## 500   0.3597029</span></span>
<span><span class="co">## 600   0.3596288</span></span>
<span><span class="co">## 700   0.3595758</span></span>
<span><span class="co">## 800   0.3595361</span></span>
<span><span class="co">## 900   0.3595052</span></span>
<span><span class="co">## 1000  0.3594804</span></span>
<span><span class="co">## ---</span></span></code></pre>
<p>We can see that <code>power_out2</code> is identical to
<code>power_out</code>.</p>
<p><br></p>
</div>
<div class="section level4">
<h4 id="variable">
<strong>What Types of Predicted Variables Can DSL
Handle?</strong><a class="anchor" aria-label="anchor" href="#variable"></a>
</h4>
<p class="lh-lg">
</p>
<p>As we have shown in various examples in <strong><a href="http://naokiegami.com/dsl/articles/intro.html">Get Started
Page</a></strong> and <strong><a href="http://naokiegami.com/dsl/articles/model.html">Models Available in
DSL</a></strong>, users can incorporate predicted variables (i.e.,
text-based variables) as the outcome and/or independent variables.</p>
<p>For example, when users have text-based variables as both the outcome
and independent variables, they can specify them as a vector in
<code>predicted_var</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_logit"</span><span class="op">)</span> <span class="co"># example data </span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_logit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Y         X1 pred_Y    pred_X1         X2          X3          X4</span></span>
<span><span class="co">## 1  0 -0.1443742      0  0.9486148 -0.2079232 -0.06932595  1.65748976</span></span>
<span><span class="co">## 2  1 -1.2864079      1 -1.8766233 -1.6961906 -0.27274691  1.54678252</span></span>
<span><span class="co">## 3  1 -1.4665386      1 -2.4866911 -0.6212224 -0.70787173 -0.27913330</span></span>
<span><span class="co">## 4  0 -1.3554115      1  0.5138155  1.2299990 -0.86519213  0.18177847</span></span>
<span><span class="co">## 5 NA         NA      1 -2.1116582  0.6624512  1.19504665 -0.02724476</span></span>
<span><span class="co">## 6 NA         NA      1 -0.6391120 -0.8971608  1.20072203 -0.51241357</span></span>
<span><span class="co">##            X5          X6         X7        X8           X9        X10</span></span>
<span><span class="co">## 1  0.96825927  0.05389556 -2.0762690 0.2653279  1.458743948  0.4127003</span></span>
<span><span class="co">## 2 -0.46626141  0.73182950 -1.7677551 1.0790758 -0.003172833 -0.5313550</span></span>
<span><span class="co">## 3 -0.26973904 -1.75925076 -0.1585703 0.6823146  0.050500221 -1.2679467</span></span>
<span><span class="co">## 4  0.41947288 -0.32375937  0.3226157 0.5131867 -2.065367939  1.6111660</span></span>
<span><span class="co">## 5 -0.94927647  1.01808653  0.7608077 1.6830265 -1.907959205 -0.6979879</span></span>
<span><span class="co">## 6  0.09162689  1.15086391 -0.7917356 0.9765960 -0.144924483 -1.2848539</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_logit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"logit"</span>, </span>
<span>                 formula <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">X1</span> <span class="op">+</span> <span class="va">X2</span> <span class="op">+</span> <span class="va">X4</span>,</span>
<span>                 predicted_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"X1"</span><span class="op">)</span>,</span>
<span>                 prediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pred_Y"</span>, <span class="st">"pred_X1"</span><span class="op">)</span>,</span>
<span>                 data <span class="op">=</span> <span class="va">data_logit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<p>When there are more than one variable in <code>predicted_var</code>,
rows that observe all the variables in <code>predicted_var</code> are
counted as labeled, and rows that have at least one <code>NA</code> in
variables in <code>predicted_var</code> are counted as non-labeled.</p>
<p><br></p>
</div>
<div class="section level4">
<h4 id="sample">
<strong>(More Complex) Sampling Strategies?</strong><a class="anchor" aria-label="anchor" href="#sample"></a>
</h4>
<p class="lh-lg">
</p>
<p>Researchers might consider sampling strategies for expert annotations
other than random sampling with equal probabilities. As long as the
sampling probability for each document is decided by the researchers and
is greater than zero, DSL is applicable. For example, DSL allows
stratified or block sampling schemes (i.e., change the sampling
probability of documents based on document-level observed covariates)
and can cover any case where the sampling probability depends on the LLM
annotation, document-level covariates, independent variables, or the
outcome variable. This generality is important because researchers might
want to over-sample documents that are difficult to annotate.</p>
<p>In function <code><a href="../reference/dsl.html">dsl()</a></code>, when using these more complex
sampling strategies, users should specify the sampling probability of
each document. For example, in the following data set, we set the
sampling probability for expert annotation to be 30% for documents with
<code>X1 = 1</code> and set it to be 10% for documents with
<code>X1 = 0</code>. As you see below, variable <code>sample_prob</code>
is <code>0.3</code> when <code>X1 = 1</code> and <code>0.1</code> when
<code>X1 = 0</code>. Thus, this is random sampling with unequal
probabilities.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_unequal"</span><span class="op">)</span> <span class="co"># example data </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_unequal</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Y pred_Y sample_prob X1         X2           X3</span></span>
<span><span class="co">## 1  0      1         0.1  0 -0.7075315  0.774843489</span></span>
<span><span class="co">## 2  0      0         0.1  0 -0.1282225 -0.351258120</span></span>
<span><span class="co">## 3  0      1         0.3  1 -0.9908576  0.733213596</span></span>
<span><span class="co">## 4 NA      1         0.3  1 -1.1068022 -0.403284103</span></span>
<span><span class="co">## 5 NA      1         0.1  0  0.2493619  0.510531594</span></span>
<span><span class="co">## 6 NA      1         0.1  0 -1.0298485  0.004936994</span></span></code></pre>
<p>When running <code><a href="../reference/dsl.html">dsl()</a></code>, users just need to specify this
unequal sampling probability in argument <code>sample_prob</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_unequal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"logit"</span>, </span>
<span>                   formula <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">X1</span> <span class="op">+</span> <span class="va">X2</span> <span class="op">+</span> <span class="va">X3</span>,</span>
<span>                   predicted_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>,</span>
<span>                   prediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pred_Y"</span><span class="op">)</span>,</span>
<span>                   sample_prob <span class="op">=</span> <span class="st">"sample_prob"</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">data_unequal</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">out_unequal</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==================</span></span>
<span><span class="co">## DSL Specification:</span></span>
<span><span class="co">## ==================</span></span>
<span><span class="co">## Model:  logit</span></span>
<span><span class="co">## Call:  Y ~ X1 + X2 + X3</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Predicted Variables:  Y</span></span>
<span><span class="co">## Prediction:  pred_Y</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Number of Labeled Observations:  334</span></span>
<span><span class="co">## Random Sampling for Labeling with Equal Probability:  No</span></span>
<span><span class="co">## (Sampling probabilities are defined in `sample_prob`)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">##             Estimate Std. Error CI Lower CI Upper p value  </span></span>
<span><span class="co">## (Intercept)  -0.2152     0.1185  -0.4475   0.0171  0.0347 *</span></span>
<span><span class="co">## X1            0.1055     0.3351  -0.5512   0.7622  0.3764  </span></span>
<span><span class="co">## X2            0.1072     0.1087  -0.1058   0.3203  0.1619  </span></span>
<span><span class="co">## X3           -0.0453     0.1159  -0.2725   0.1819  0.3480  </span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## 95% confidence intervals (CI) are reported.</span></span></code></pre>
<p>When users rely on random sampling with unequal probabilities,
<code>Random Sampling with Equal Probability</code> becomes
<code>No</code>.</p>
<p><br></p>
</div>
<div class="section level4">
<h4 id="cluster">
<strong>How Can We Implement Cluster Standard Errors in
DSL?</strong><a class="anchor" aria-label="anchor" href="#cluster"></a>
</h4>
<p class="lh-lg">
</p>
<p>Users need to supply a variable name that defines clusters to
argument <code>cluster</code> in function <code><a href="../reference/dsl.html">dsl()</a></code>. This
option is available for all model types (<code>lm</code>,
<code>logit</code>, and <code>felm</code>).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_felm"</span><span class="op">)</span> <span class="co"># example data </span></span>
<span></span>
<span><span class="va">out_felm_one</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"felm"</span>, </span>
<span>                    formula <span class="op">=</span> <span class="va">log_pcap</span> <span class="op">~</span> <span class="va">log_gsp</span> <span class="op">+</span> <span class="va">log_pc</span> <span class="op">+</span> <span class="va">unemp</span>,</span>
<span>                    predicted_var <span class="op">=</span>  <span class="st">"log_gsp"</span>,</span>
<span>                    prediction <span class="op">=</span> <span class="st">"pred_log_gsp"</span>,</span>
<span>                    fixed_effect <span class="op">=</span> <span class="st">"oneway"</span>, </span>
<span>                    index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span>, </span>
<span>                    cluster <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>                    data <span class="op">=</span> <span class="va">data_felm</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">out_felm_one</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==================</span></span>
<span><span class="co">## DSL Specification:</span></span>
<span><span class="co">## ==================</span></span>
<span><span class="co">## Model:  felm (oneway)</span></span>
<span><span class="co">## Call:  log_pcap ~ log_gsp + log_pc + unemp</span></span>
<span><span class="co">## Fixed Effects:  state</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Predicted Variables:  log_gsp</span></span>
<span><span class="co">## Prediction:  pred_log_gsp</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Number of Labeled Observations:  334</span></span>
<span><span class="co">## Random Sampling for Labeling with Equal Probability: Yes</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">##         Estimate Std. Error CI Lower CI Upper p value    </span></span>
<span><span class="co">## log_gsp   0.0031     0.0020  -0.0007   0.0069  0.0563   .</span></span>
<span><span class="co">## log_pc    0.5357     0.0419   0.4537   0.6178  0.0000 ***</span></span>
<span><span class="co">## unemp     0.0067     0.0021   0.0025   0.0108  0.0008 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## 95% confidence intervals (CI) are reported.</span></span>
<span><span class="co">## Standard errors are clustered by state.</span></span></code></pre>
<p>When users applied cluster standard errors, the level of clustering
is reported after the <code>Coefficients</code> table, e.g., as
<code>Standard errors are clustered by state</code>.</p>
<p><br></p>
</div>
<div class="section level4">
<h4 id="unit">
<strong>What if the Unit of Analysis is not the same as the Unit of
Labeling?</strong><a class="anchor" aria-label="anchor" href="#unit"></a>
</h4>
<p class="lh-lg">
</p>
<p>In some applications, the unit of analysis is not the same as the
unit of labeling. Researchers often annotate each document, but the unit
of analysis might be some aggregates of documents. For example, users
might code whether each online post by political candidates mentions an
economic policy: the unit of labeling is at the online post level. But
researchers might be interested in how the proportion of posts
mentioning an economic policy varies between different candidates: the
unit of analysis is at the candidate level. Here, each candidate has
multiple posts, and the main text-based variable is defined as the
proportion of online posts mentioning an economic policy for each
candidate.</p>
<p>In such applications, how can users apply DSL? We provide step by
step guide <strong><a href="http://naokiegami.com/dsl/articles/aggregate.html">here</a>.</strong></p>
<p><br></p>
</div>
<div class="section level4">
<h4 id="category">
<strong>How to use DSL for Estimating the Category Proportions over
Time or across Groups?</strong><a class="anchor" aria-label="anchor" href="#category"></a>
</h4>
<p class="lh-lg">
</p>
<p>Many scholars are interested in estimating the proportion of all
documents in each user-specified category. For example, we might study
how the proportion of censored documents changes over time, or how the
proportion of social media posts containing hate speech differs across
groups, such as Democrats and Republicans. These questions can be
analyzed within the DSL framework, too.</p>
<p>We start with the basic data structure for <code>dsl</code>. In this
data, <code>Y</code> denotes whether a document belongs to a category of
interest, and <code>pred_Y</code> denotes the predicted value. We
estimate the category proportions over time here as an example, but the
same approach applies to estimating the category proportions across
groups.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_time"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_time</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    Y pred_Y year</span></span>
<span><span class="co">## 1  1      1 2001</span></span>
<span><span class="co">## 2  1      0 2001</span></span>
<span><span class="co">## 3  0      1 2001</span></span>
<span><span class="co">## 4 NA      1 2001</span></span>
<span><span class="co">## 5 NA      0 2001</span></span>
<span><span class="co">## 6 NA      0 2001</span></span></code></pre>
<p>To estimate the category proportions over time, researchers can
regress a text category on time using linear regression without an
intercept. This is numerically equivalent to computing the DSL estimates
within each year separately. To implement this, researchers can simply
add <code>-1</code> to <code>formula</code> to remove an intercept. Note
that this estimation approach uses the numerical equivalence between
linear regression (<code>lm</code>) and subgroup means (as scholars use
linear regression to compute difference-in-means in randomized
experiments), and thus, researchers do not need to use logistic
regression (<code>logit</code>).</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"lm"</span>,</span>
<span>                formula <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>                predicted_var <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                prediction <span class="op">=</span> <span class="st">"pred_Y"</span>,</span>
<span>                data <span class="op">=</span> <span class="va">data_time</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">out_time</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==================</span></span>
<span><span class="co">## DSL Specification:</span></span>
<span><span class="co">## ==================</span></span>
<span><span class="co">## Model:  lm</span></span>
<span><span class="co">## Call:  Y ~ as.factor(year) - 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Predicted Variables:  Y</span></span>
<span><span class="co">## Prediction:  pred_Y</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Number of Labeled Observations:  500</span></span>
<span><span class="co">## Random Sampling for Labeling with Equal Probability: Yes</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">##                     Estimate Std. Error CI Lower CI Upper p value    </span></span>
<span><span class="co">## as.factor(year)2001   0.6447     0.0652   0.5169   0.7725   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2002   0.6233     0.0653   0.4953   0.7514   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2003   0.2959     0.0808   0.1376   0.4542   1e-04 ***</span></span>
<span><span class="co">## as.factor(year)2004   0.4441     0.0693   0.3084   0.5799   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2005   0.6290     0.0722   0.4876   0.7705   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2006   0.4278     0.0727   0.2853   0.5702   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2007   0.5710     0.0766   0.4209   0.7212   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2008   0.6704     0.0674   0.5382   0.8026   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2009   0.4957     0.0639   0.3704   0.6210   0e+00 ***</span></span>
<span><span class="co">## as.factor(year)2010   0.4760     0.0704   0.3380   0.6139   0e+00 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## 95% confidence intervals (CI) are reported.</span></span></code></pre>
<p>Here, coefficients in front of each year are the estimated category
proportions for each year.</p>
<p><br></p>
<!-- #### **Predictions are Multiple Steps** -->
<!-- <p class="lh-lg"> -->
<!-- </p> -->
<!-- <br> -->
<!-- #### **Only about Texts?** -->
<!-- <p class="lh-lg"> -->
<!-- </p> -->
<!-- <br> -->
</div>
<div class="section level4">
<h4 id="sl">
<strong>How Can We Internally Implement Supervised Machine Learning
for Predictions?</strong><a class="anchor" aria-label="anchor" href="#sl"></a>
</h4>
<p class="lh-lg">
</p>
<p>One of the most common use cases of the package is when researchers
have LLM annotations as <code>prediction</code> for some key text-based
variables defined in <code>predicted_var</code>.</p>
<p>Alternatively, researchers can also internally implement the
classical supervised machine learning methods to make predictions using
the expert-coded data.</p>
<p>By building on <code>SuperLearner</code> package, we offer the
following 41 supervised ML methods.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/available_method.html">available_method</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "grf"              "bartMachine"      "bayesglm"         "biglasso"        </span></span>
<span><span class="co">##  [5] "caret"            "caret.rpart"      "cforest"          "earth"           </span></span>
<span><span class="co">##  [9] "gam"              "gbm"              "glm"              "glm.interaction" </span></span>
<span><span class="co">## [13] "glmnet"           "ipredbagg"        "kernelKnn"        "knn"             </span></span>
<span><span class="co">## [17] "ksvm"             "lda"              "leekasso"         "lm"              </span></span>
<span><span class="co">## [21] "loess"            "logreg"           "mean"             "nnet"            </span></span>
<span><span class="co">## [25] "nnls"             "polymars"         "qda"              "randomForest"    </span></span>
<span><span class="co">## [29] "ranger"           "ridge"            "rpart"            "rpartPrune"      </span></span>
<span><span class="co">## [33] "speedglm"         "speedlm"          "step"             "step.forward"    </span></span>
<span><span class="co">## [37] "step.interaction" "stepAIC"          "svm"              "xgboost"</span></span></code></pre>
<p>When researchers internally implement the classical supervised
machine learning methods, the data structure looks like the data used in
the classical supervised machine learning. In this example,
<code>Y</code> requires text annotation and there are 10 variables
available to predict <code>Y</code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"data_sl"</span><span class="op">)</span>  <span class="co"># example data </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_sl</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##            Y          X1          X2         X3          X4         X5</span></span>
<span><span class="co">## 1 -0.2050247 -0.09910396 -0.87960666  0.8015421  1.29028152  0.8532547</span></span>
<span><span class="co">## 2 -1.4856037  1.23123941  1.99007602  0.3868839 -0.07223693 -1.2962462</span></span>
<span><span class="co">## 3  0.9894281  0.46408759  0.42323988 -0.1097634  0.25241778 -0.9464925</span></span>
<span><span class="co">## 4         NA -1.12227958 -0.06897893 -0.4601287  1.49975679  1.5618861</span></span>
<span><span class="co">## 5         NA -0.67877168 -0.33290315 -1.4747134 -1.89504047  0.5137869</span></span>
<span><span class="co">## 6         NA  0.04734624 -0.18367264 -1.1965101  0.11178831  0.1975828</span></span>
<span><span class="co">##           X6         X7          X8         X9        X10</span></span>
<span><span class="co">## 1 -0.4914913 -1.0640511  0.01688910  1.8391539 -2.3456977</span></span>
<span><span class="co">## 2 -1.2428339  0.0644001  1.92829279 -1.3745543 -0.5644520</span></span>
<span><span class="co">## 3  0.8812547  1.5719390 -1.31725336  0.9007558  0.4595894</span></span>
<span><span class="co">## 4  0.2493619  0.5105316  0.02339191 -0.3850724 -1.2070657</span></span>
<span><span class="co">## 5  0.2394639 -1.4016767 -0.30634290  1.5934046  0.4291247</span></span>
<span><span class="co">## 6 -1.6337523 -0.3078537 -0.51741473 -1.1128772 -0.5747400</span></span></code></pre>
<p>To internally implement supervised machine learning methods, users
have to decide on a supervised machine learning model (specified in
<code>sl_method</code>) and predictors (specified in
<code>feature</code>). In <code>formula</code>, researchers can then
specify the downstream statistical model they run after predicting
<code>Y</code>. In this example, the main downstream analysis is linear
regression where the outcome is <code>Y</code> and independent variables
are <code>X1</code>,<code>X2</code>, and <code>X4</code>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_lm_grf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dsl.html">dsl</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"lm"</span>, </span>
<span>                  formula <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">X1</span> <span class="op">+</span> <span class="va">X2</span> <span class="op">+</span> <span class="va">X4</span>,</span>
<span>                  predicted_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>,</span>
<span>                  sl_method <span class="op">=</span> <span class="st">"grf"</span>,</span>
<span>                  feature <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"X3"</span>, <span class="st">"X4"</span>, <span class="st">"X5"</span>, <span class="st">"X6"</span>, <span class="st">"X7"</span>, <span class="st">"X8"</span>, <span class="st">"X9"</span>, <span class="st">"X10"</span><span class="op">)</span>,</span>
<span>                  data <span class="op">=</span> <span class="va">data_sl</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cross-Fitting: 1/10..2/10..3/10..4/10..5/10..6/10..7/10..8/10..9/10..10/10..</span></span></code></pre>
<p>Here, we set <code>sl_method = "grf"</code> to use generalized random
forest as the supervised machine learning model.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">out_lm_grf</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ==================</span></span>
<span><span class="co">## DSL Specification:</span></span>
<span><span class="co">## ==================</span></span>
<span><span class="co">## Model:  lm</span></span>
<span><span class="co">## Call:  Y ~ X1 + X2 + X4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Predicted Variables:  Y</span></span>
<span><span class="co">## Prediction:  with predictors specified in `covariates`</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Number of Labeled Observations:  500</span></span>
<span><span class="co">## Random Sampling for Labeling with Equal Probability: Yes</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">## =============</span></span>
<span><span class="co">##             Estimate Std. Error CI Lower CI Upper p value    </span></span>
<span><span class="co">## (Intercept)   0.0299     0.0497  -0.0676   0.1273  0.2741    </span></span>
<span><span class="co">## X1            0.3980     0.0534   0.2934   0.5026  0.0000 ***</span></span>
<span><span class="co">## X2           -0.2432     0.0496  -0.3405  -0.1460  0.0000 ***</span></span>
<span><span class="co">## X4           -0.2711     0.0498  -0.3688  -0.1734  0.0000 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## 95% confidence intervals (CI) are reported.</span></span></code></pre>
<!-- The theory of DSL implies that DSL estimates are consistent and have valid confidence intervals regardless of the choice of the underlying ML model. Researchers can check the stability of DSL estimates by changing the underlying ML model. Below, we set `method = "glmnet"` to use Lasso as the supervised machine learning model.  -->
<!-- ```{r eval = TRUE, echo = TRUE, tidy = FALSE, warning = FALSE, error = FALSE, message = FALSE} -->
<!-- library(glmnet) -->
<!-- out_lm_lasso <- dsl(model = "lm",  -->
<!--                     formula = Y ~ X1 + X2 + X4, -->
<!--                     predicted_var = c("Y"), -->
<!--                     method = "glmnet", -->
<!--                     covariates =  c("X1", "X2", "X3", "X4", "X5", "X6", "X7", "X8", "X9", "X10"), -->
<!--                     data = data_sl) -->
<!-- summary(out_lm_lasso) -->
<!-- ``` -->
<!-- Estimates based on random forest and Lasso are similar (within about 0.02 and smaller than standard errors) because DSL properly takes into account different prediction errors in each ML prediction.  -->
<p>Finally, for many existing methods that require stringent assumptions
about prediction errors, they often have strict rules about whether
variables used in the prediction stage can overlap with variables in the
main analyses. Fortunately, in DSL, researchers do not need to worry
about these issues because DSL does not require any assumption about
prediction error. This is why researchers can include variables in the
main statistical analyses (<code>X1</code>, <code>X2</code>, and
<code>X4</code>) in the prediction step as well.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Naoki Egami, Musashi Hinck, Brandon M. Stewart, Hanying Wei.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
